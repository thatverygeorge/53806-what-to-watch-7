{"version":3,"sources":["const.js","components/film-screen/film.prop.js","components/small-film-card-player/small-film-card-player.jsx","components/small-film-card/small-film-card.jsx","components/films-list/films-list.jsx","components/genres-list/genres-list.jsx","components/logo/logo.jsx","components/footer/footer.jsx","components/button-show-more/button-show-more.jsx","utils.js","store/action.js","store/adapter.js","store/api-actions.js","store/user/user.js","store/films/films.js","store/genre/genre.js","store/root-reducer.js","store/user/selectors.js","components/user-block/user-block.jsx","components/button-play/button-play.jsx","components/button-my-list/button-my-list.jsx","store/films/selectors.js","components/promo-film/promo-film.jsx","store/genre/selectors.js","components/loading-screen/loading-screen.jsx","components/main-screen/main-screen.jsx","components/sign-in-screen/sign-in-screen.jsx","components/my-list-screen/my-list-screen.jsx","components/films-list-similar/films-list-similar.jsx","components/film-overview/film-overview.jsx","components/film-details/film-details.jsx","components/review/review.jsx","components/film-reviews/film-reviews.jsx","components/film-tabs/film-tabs.jsx","components/film-screen/film-screen.jsx","components/toast/toast.jsx","components/add-review-form/add-review-form.jsx","components/add-review-screen/add-review-screen.jsx","components/player-controls/player-controls.jsx","components/player-screen/player-screen.jsx","components/not-found-screen/not-found-screen.jsx","components/private-route/private-route.jsx","hocs/with-film.jsx","components/app/app.jsx","services/api.js","browser-history.js","store/middlewares/redirect.js","index.js"],"names":["AppRoute","Tabs","APIRoute","AuthorizationStatus","StoreKeys","RatingLabels","PropTypes","shape","id","number","isRequired","name","string","posterImage","previewImage","backgroundImage","backgroundColor","videoLink","previewVideoLink","description","rating","scoresCount","director","starring","arrayOf","runTime","genre","released","isFavorite","bool","SmallFilmCardPlayer","props","playerRef","useRef","film","useEffect","timer","setTimeout","current","play","catch","clearTimeout","src","ref","className","width","height","poster","muted","SmallFilmCard","history","useHistory","isActive","onFilmCardHoverChange","style","cursor","onClick","push","onMouseEnter","onMouseLeave","undefined","alt","to","FilmsList","films","filmsCount","useState","activeFilmID","setActiveFilmID","slice","map","GenresList","activeGenre","onGenreChange","genres","Set","Array","from","Logo","Footer","ButtonShowMore","onShowMoreButtonClick","type","formatRunTimeForPlayer","duration","Math","floor","minutes","seconds","hours","formatRunTimeForFilmDetails","getFilmsByGenre","filter","ActionType","changeGenre","createAction","payload","loadFilms","loadFilm","loadPromoFilm","loadSimilarFilms","loadReviews","reviews","loadFavoriteFilms","favorite","setIsDataLoaded","obj","requireAuthorization","status","logout","redirectToRoute","url","adaptToClient","Object","assign","fetchFilms","dispatch","_getState","api","get","then","data","key","isDataLoaded","initialState","authorizationStatus","user","createReducer","builder","addCase","state","action","promoFilm","similar","NameSpace","combineReducers","getAuthorizationStatus","UserBlock","useSelector","useDispatch","avatarURL","localStorage","getItem","evt","preventDefault","delete","removeItem","closeSession","ButtonPlay","viewBox","xlinkHref","ButtonMyList","setIsFavorite","prevState","post","postFavorite","getFilms","getFilm","getPromoFilm","getSimilarFilms","getReviews","getFavoriteFilms","getDataLoadedStatus","PromoFilm","getGenre","LoadingScreen","marginTop","textAlign","color","MainScreen","setFilmsCount","target","tagName","textContent","length","prevFilmsCount","SignInScreen","isError","setIsError","onInput","onSubmit","formData","FormData","email","password","split","some","character","setItem","token","avatarUrl","login","placeholder","required","data-testid","htmlFor","MyListScreen","FilmsListSimilar","filmIDToExclude","FilmOverview","toString","replace","join","FilmDetails","star","index","array","Fragment","Review","review","date","Date","comment","dateTime","getFullYear","getMonth","getDate","toLocaleDateString","year","month","day","FilmReviews","response","reviewsColumnLeft","reviewsColumnRight","FilmTabs","useParams","tab","getComponentByActiveTab","FilmScreen","Toast","text","AddReviewForm","setReview","toastVisibility","setToastVisbility","setFormDisability","form","elements","forEach","element","disabled","onError","onSuccess","reset","prevReview","postReview","onChange","value","AddReviewScreen","PlayerControls","isPlaying","currentTimeInPercentages","onPausePlayButtonClick","onFullScreenButtonClick","max","left","MediaState","PlayerScreen","isFullScreen","playerState","setPlayerState","handleEscapeKeydown","document","removeEventListener","onTimeUpdate","currentTime","onDurationChange","pause","addEventListener","NotFoundScreen","PrivateRoute","render","path","exact","routeProps","withFilm","Component","fetchFilm","FilmScreenWrapped","AddReviewScreenWrapped","PlayerScreenWrapped","App","HttpCode","browserHistory","createBrowserHistory","redirect","_store","next","onUnauthorized","axios","create","baseURL","timeout","interceptors","use","err","request","headers","getToken","createAPI","store","configureStore","reducer","rootReducer","middleware","getDefaultMiddleware","thunk","extraArgument","concat","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.51247cad.chunk.js","sourcesContent":["export const AppRoute = {\n  MAIN: '/',\n  SIGN_IN: '/login',\n  MY_LIST: '/mylist',\n  FILM: '/films/:id/:tab(details|reviews)?',\n  ADD_REVIEW: '/films/:id/review',\n  PLAYER: '/player/:id',\n  NOT_FOUND: '/404',\n};\n\nexport const Tabs = {\n  OVERVIEW: 'overview',\n  DETAILS: 'details',\n  REVIEWS: 'reviews',\n};\n\nexport const APIRoute = {\n  FILMS: '/films',\n  LOGIN: '/login',\n  LOGOUT: '/logout',\n  REVIEWS: '/comments',\n  SIMILAR: '/similar',\n  PROMO: '/promo',\n  FAVORITE: '/favorite',\n};\n\nexport const AuthorizationStatus = {\n  AUTH: 'AUTH',\n  NO_AUTH: 'NO_AUTH',\n};\n\nexport const StoreKeys = {\n  FILMS: 'films',\n  PROMO_FILM: 'promoFilm',\n  FILM: 'film',\n  REVIEWS: 'reviews',\n  SIMILAR: 'similar',\n  FAVORITE: 'favorite',\n};\n\nexport const RatingLabels = {\n  BAD: 'Bad',\n  NORMAL: 'Normal',\n  GOOD: 'Good',\n  VERY_GOOD: 'Very Good',\n  AWESOME: 'Awesome',\n};\n","import PropTypes from 'prop-types';\n\nexport default PropTypes.shape({\n  id: PropTypes.number.isRequired,\n  name: PropTypes.string.isRequired,\n  posterImage: PropTypes.string.isRequired,\n  previewImage: PropTypes.string.isRequired,\n  backgroundImage: PropTypes.string.isRequired,\n  backgroundColor: PropTypes.string.isRequired,\n  videoLink: PropTypes.string.isRequired,\n  previewVideoLink: PropTypes.string.isRequired,\n  description: PropTypes.string.isRequired,\n  rating: PropTypes.number.isRequired,\n  scoresCount: PropTypes.number.isRequired,\n  director: PropTypes.string.isRequired,\n  starring: PropTypes.arrayOf(PropTypes.string).isRequired,\n  runTime: PropTypes.number.isRequired,\n  genre: PropTypes.string.isRequired,\n  released: PropTypes.number.isRequired,\n  isFavorite: PropTypes.bool.isRequired,\n});\n","import React, {useRef, useEffect} from 'react';\nimport filmProp from '../film-screen/film.prop';\n\nconst PLAY_TIMEOUT = 1000;\n\nfunction SmallFilmCardPlayer(props) {\n  const playerRef = useRef(null);\n  const {film} = props;\n\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      playerRef.current.play().catch(() => {});\n    }, PLAY_TIMEOUT);\n    return () => clearTimeout(timer);\n  }, []);\n\n  return (\n    <video\n      src={film.previewVideoLink}\n      ref={playerRef}\n      className=\"player__video\"\n      width=\"280\"\n      height=\"175\"\n      poster={film.previewImage}\n      muted\n    />\n  );\n}\n\nSmallFilmCardPlayer.propTypes = {\n  film: filmProp,\n};\n\nexport default SmallFilmCardPlayer;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {Link, useHistory} from 'react-router-dom';\nimport filmProp from '../film-screen/film.prop';\nimport SmallFilmCardPlayer from '../small-film-card-player/small-film-card-player';\n\nfunction SmallFilmCard(props) {\n  const history = useHistory();\n  const {film, isActive, onFilmCardHoverChange} = props;\n\n  return (\n    <article\n      style={{cursor: 'pointer'}}\n      className=\"small-film-card catalog__films-card\"\n      onClick={() => history.push(`/films/${film.id}`)}\n      onMouseEnter={() => onFilmCardHoverChange(film.id)}\n      onMouseLeave={() => onFilmCardHoverChange(undefined)}\n    >\n      <div className=\"small-film-card__image\">\n        {!isActive ? <img src={film.previewImage} alt={film.name} width=\"280\" height=\"175\" /> : <SmallFilmCardPlayer film={film} />}\n      </div>\n      <h3 className=\"small-film-card__title\">\n        <Link to={`/films/${film.id}`} className=\"small-film-card__link\">{film.name}</Link>\n      </h3>\n    </article>\n  );\n}\n\nSmallFilmCard.propTypes = {\n  film: filmProp,\n  isActive: PropTypes.bool.isRequired,\n  onFilmCardHoverChange: PropTypes.func.isRequired,\n};\n\nexport default SmallFilmCard;\n","import React, {useState} from 'react';\nimport PropTypes from 'prop-types';\nimport SmallFilmCard from '../small-film-card/small-film-card';\nimport filmProp from '../film-screen/film.prop';\n\nfunction FilmsList(props) {\n  const {films, filmsCount} = props;\n  const [activeFilmID, setActiveFilmID] = useState(undefined);\n\n  const onFilmCardHoverChange = (id) => {\n    setActiveFilmID(id);\n  };\n\n  return (\n    <div className=\"catalog__films-list\">\n      {films.slice(0, filmsCount).map((film) => (\n        <SmallFilmCard\n          key={film.id}\n          film={film}\n          isActive={activeFilmID === film.id}\n          onFilmCardHoverChange={onFilmCardHoverChange}\n        />))}\n    </div>\n  );\n}\n\nFilmsList.propTypes = {\n  films: PropTypes.arrayOf(\n    filmProp,\n  ),\n  filmsCount: PropTypes.number.isRequired,\n};\n\nexport default FilmsList;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {Link} from 'react-router-dom';\nimport filmProp from '../film-screen/film.prop';\nimport {AppRoute} from '../../const';\n\nfunction GenresList(props) {\n  const {films, activeGenre, onGenreChange} = props;\n\n  const genres = new Set(films.map((film) => film.genre));\n\n  return (\n    <ul className=\"catalog__genres-list\" onClick={onGenreChange}>\n      <li className={`catalog__genres-item ${activeGenre === 'All genres' ? 'catalog__genres-item--active' : ''}`}>\n        <Link to={AppRoute.MAIN} className=\"catalog__genres-link\">All genres</Link>\n      </li>\n\n      {Array.from(genres).map((genre) => (\n        <li className={`catalog__genres-item ${activeGenre === genre ? 'catalog__genres-item--active' : ''}`} key={genre}>\n          <Link to={AppRoute.MAIN} className=\"catalog__genres-link\">{genre}</Link>\n        </li>\n      ))}\n    </ul>\n  );\n}\n\nGenresList.propTypes = {\n  films: PropTypes.arrayOf(\n    filmProp,\n  ),\n  activeGenre: PropTypes.string.isRequired,\n  onGenreChange: PropTypes.func.isRequired,\n};\n\nexport default GenresList;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {Link} from 'react-router-dom';\nimport {AppRoute} from '../../const';\n\nfunction Logo({className = 'logo__link'}) {\n  return (\n    <div className=\"logo\">\n      <Link to={AppRoute.MAIN} className={className}>\n        <span className=\"logo__letter logo__letter--1\">W</span>\n        <span className=\"logo__letter logo__letter--2\">T</span>\n        <span className=\"logo__letter logo__letter--3\">W</span>\n      </Link>\n    </div>\n  );\n}\n\nLogo.propTypes = {\n  className: PropTypes.string,\n};\n\nexport default Logo;\n","import React from 'react';\nimport Logo from '../logo/logo';\n\nfunction Footer() {\n  return (\n    <footer className=\"page-footer\">\n      <Logo className=\"logo__link logo__link--light\" />\n\n      <div className=\"copyright\">\n        <p>© 2019 What to watch Ltd.</p>\n      </div>\n    </footer>\n  );\n}\n\nexport default Footer;\n\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nfunction ButtonShowMore(props) {\n  const {onShowMoreButtonClick} = props;\n\n  return (\n    <button className=\"catalog__button\" type=\"button\" onClick={onShowMoreButtonClick}>Show more</button>\n  );\n}\n\nButtonShowMore.propTypes = {\n  onShowMoreButtonClick: PropTypes.func.isRequired,\n};\n\nexport default ButtonShowMore;\n","import {RatingLabels} from './const';\n\nexport const formatRunTimeForPlayer = (runTime) => {\n  const duration = Math.floor(runTime);\n\n  let minutes = Math.floor(duration / 60);\n  let seconds = duration - minutes * 60;\n  let hours = Math.floor(minutes / 60);\n\n  minutes = minutes % 60;\n\n  hours = hours > 9 ? hours : `0${hours}`;\n  minutes = minutes > 9 ? minutes : `0${minutes}`;\n  seconds = seconds > 9 ? seconds : `0${seconds}`;\n\n  if (hours === '00') {\n    return `${minutes}:${seconds}`;\n  }\n\n  return `${hours}:${minutes}:${seconds}`;\n};\n\nexport const formatRunTimeForFilmDetails = (runTime) => {\n  const hours = Math.floor(runTime / 60);\n  const minutes = runTime % 60 > 9 ? runTime % 60 : `0${runTime % 60}`;\n\n  if (hours === 0) {\n    return `${minutes}m`;\n  } else if (minutes === 0 || minutes === '00') {\n    return `${hours}h`;\n  }\n\n  return `${hours}h ${minutes}m`;\n};\n\nexport const getRatingLevel = (rating) => {\n  if (rating < 3) {\n    return RatingLabels.BAD;\n  } else if (rating < 5) {\n    return RatingLabels.NORMAL;\n  } else if (rating < 8) {\n    return RatingLabels.GOOD;\n  } else if (rating < 10) {\n    return RatingLabels.VERY_GOOD;\n  } else if (rating >= 10) {\n    return RatingLabels.AWESOME;\n  }\n};\n\nexport const excludeFilm = (films, id) => films.filter((film) => film.id !== id);\n\nexport const getFilmsByGenre = (films, genre) => genre === 'All genres' ? films : films.filter((film) => film.genre === genre);\n","import {createAction} from '@reduxjs/toolkit';\n\nexport const ActionType = {\n  CHANGE_GENRE: 'data/changeGenre',\n  LOAD_FILMS: 'data/loadFilms',\n  LOAD_FILM: 'data/loadFilm',\n  LOAD_PROMO_FILM: 'data/loadPromoFilm',\n  SET_IS_DATA_LOADED: 'data/setIsDataLoaded',\n  REQUIRED_AUTHORIZATION: 'user/requiredAuthorization',\n  LOGOUT: 'user/logout',\n  REDIRECT_TO_ROUTE: 'app/redirectToRoute',\n  LOAD_REVIEWS: 'data/loadReviews',\n  LOAD_SIMILAR_FILMS: 'data/loadSimilarFilms',\n  LOAD_FAVORITE_FILMS: 'data/loadFavoriteFilms',\n};\n\nexport const changeGenre = createAction(ActionType.CHANGE_GENRE, (genre) => ({\n  payload: genre,\n}));\n\nexport const loadFilms = createAction(ActionType.LOAD_FILMS, (films) => ({\n  payload: films,\n}));\n\nexport const loadFilm = createAction(ActionType.LOAD_FILM, (film) => ({\n  payload: film,\n}));\n\nexport const loadPromoFilm = createAction(ActionType.LOAD_PROMO_FILM, (film) => ({\n  payload: film,\n}));\n\nexport const loadSimilarFilms = createAction(ActionType.LOAD_SIMILAR_FILMS, (films) => ({\n  payload: films,\n}));\n\nexport const loadReviews = createAction(ActionType.LOAD_REVIEWS, (reviews) => ({\n  payload: reviews,\n}));\n\nexport const loadFavoriteFilms = createAction(ActionType.LOAD_FAVORITE_FILMS, (favorite) => ({\n  payload: favorite,\n}));\n\nexport const setIsDataLoaded = createAction(ActionType.SET_IS_DATA_LOADED, (obj) => ({\n  payload: obj,\n}));\n\nexport const requireAuthorization = createAction(ActionType.REQUIRED_AUTHORIZATION, (status) => ({\n  payload: status,\n}));\n\nexport const logout = createAction(ActionType.LOGOUT);\n\nexport const redirectToRoute = createAction(ActionType.REDIRECT_TO_ROUTE, (url) => ({\n  payload: url,\n}));\n","export const adaptToClient = (film) => {\n  const adaptedEvent = Object.assign(\n    {},\n    film,\n    {\n      previewVideoLink: 'https://upload.wikimedia.org/wikipedia/commons/transcoded/b/b3/Big_Buck_Bunny_Trailer_400p.ogv/Big_Buck_Bunny_Trailer_400p.ogv.360p.webm',\n    },\n  );\n\n  return adaptedEvent;\n};\n\nexport const adaptToServer = (film) => {\n  const adaptedEvent = Object.assign(\n    {},\n    film,\n  );\n\n  return adaptedEvent;\n};\n","import {APIRoute, AppRoute, AuthorizationStatus, StoreKeys} from '../const';\nimport {\n  loadFilm,\n  loadFilms,\n  loadPromoFilm,\n  loadReviews,\n  loadSimilarFilms,\n  redirectToRoute,\n  requireAuthorization,\n  logout as closeSession,\n  setIsDataLoaded,\n  loadFavoriteFilms\n} from './action';\nimport {adaptToClient} from './adapter';\n\nexport const checkAuth = () => (dispatch, _getState, api) => (\n  api.get(APIRoute.LOGIN)\n    .then(() => dispatch(requireAuthorization(AuthorizationStatus.AUTH)))\n    .catch(() => {})\n);\n\nexport const login = ({email, password}) => (dispatch, _getState, api) => (\n  api.post(APIRoute.LOGIN, {email, password})\n    .then(({data}) => {\n      localStorage.setItem('token', data.token);\n      localStorage.setItem('avatar', data.avatarUrl);\n      localStorage.setItem('name', data.name);\n      localStorage.setItem('email', data.email);\n    })\n    .then(() => dispatch(requireAuthorization(AuthorizationStatus.AUTH)))\n    .then(() => dispatch(redirectToRoute(AppRoute.MAIN)))\n);\n\nexport const logout = () => (dispatch, _getState, api) => (\n  api.delete(APIRoute.LOGOUT)\n    .then(() => localStorage.removeItem('token'))\n    .then(() => dispatch(closeSession()))\n    .catch(() => {\n      localStorage.removeItem('token');\n      dispatch(closeSession());\n    })\n);\n\nexport const fetchPromoFilm = () => (dispatch, _getState, api) => (\n  api.get(APIRoute.PROMO)\n    .then(({data}) => dispatch(loadPromoFilm(adaptToClient(data))))\n);\n\nexport const fetchFilms = () => (dispatch, _getState, api) => (\n  api.get(APIRoute.FILMS)\n    .then(({data}) => dispatch(loadFilms(data.map((film) => adaptToClient(film)))))\n    .then(() => dispatch(fetchPromoFilm()))\n    .then(() => dispatch(setIsDataLoaded({key: StoreKeys.FILMS, isDataLoaded: true})))\n);\n\nexport const fetchFilm = (id) => (dispatch, _getState, api) => (\n  api.get(`${APIRoute.FILMS}/${id}`)\n    .then(({data}) => dispatch(loadFilm(adaptToClient(data))))\n    .then(() => dispatch(setIsDataLoaded({key: StoreKeys.FILM, isDataLoaded: true})))\n    .catch(() => dispatch(setIsDataLoaded({key: StoreKeys.FILM, isDataLoaded: true})))\n);\n\nexport const fetchSimilarFilms = (id) => (dispatch, _getState, api) => (\n  api.get(`${APIRoute.FILMS}/${id}${APIRoute.SIMILAR}`)\n    .then(({data}) => dispatch(loadSimilarFilms(data.map((film) => adaptToClient(film)))))\n    .then(() => dispatch(setIsDataLoaded({key: StoreKeys.SIMILAR, isDataLoaded: true})))\n    .catch(() => dispatch(setIsDataLoaded({key: StoreKeys.SIMILAR, isDataLoaded: true})))\n);\n\nexport const fetchFavoriteFilms = () => (dispatch, _getState, api) => (\n  api.get(APIRoute.FAVORITE)\n    .then(({data}) => dispatch(loadFavoriteFilms(data.map((film) => adaptToClient(film)))))\n    .then(() => dispatch(setIsDataLoaded({key: StoreKeys.FAVORITE, isDataLoaded: true})))\n    .catch(() => dispatch(setIsDataLoaded({key: StoreKeys.FAVORITE, isDataLoaded: true})))\n);\n\nexport const fetchReviews = (id) => (dispatch, _getState, api) => (\n  api.get(`${APIRoute.REVIEWS}/${id}`)\n    .then((response) => dispatch(loadReviews(response.data)))\n    .then(() => dispatch(setIsDataLoaded({key: StoreKeys.REVIEWS, isDataLoaded: true})))\n    .catch(() => dispatch(setIsDataLoaded({key: StoreKeys.REVIEWS, isDataLoaded: true})))\n);\n\nexport const postReview = (id, {rating, comment}) => (dispatch, _getState, api) => (\n  api.post(`${APIRoute.REVIEWS}/${id}`, {rating, comment})\n);\n\nexport const postFavorite = (id, status) => (dispatch, _getState, api) => (\n  api.post(`${APIRoute.FAVORITE}/${id}/${status}`)\n);\n","import {AuthorizationStatus} from '../../const';\nimport {requireAuthorization, logout} from '../action';\nimport {createReducer} from '@reduxjs/toolkit';\n\nconst initialState = {\n  authorizationStatus: AuthorizationStatus.NO_AUTH,\n};\n\nexport const user = createReducer(initialState, (builder) => {\n  builder\n    .addCase(requireAuthorization, (state, action) => {\n      state.authorizationStatus = action.payload;\n    })\n    .addCase(logout, (state) => {\n      state.authorizationStatus = AuthorizationStatus.NO_AUTH;\n    });\n});\n","import {createReducer} from '@reduxjs/toolkit';\nimport {\n  loadFavoriteFilms,\n  loadFilm,\n  loadFilms,\n  loadPromoFilm,\n  loadReviews,\n  loadSimilarFilms,\n  setIsDataLoaded\n} from '../action';\n\nconst initialState = {\n  films: {\n    data: [],\n    isDataLoaded: false,\n  },\n  promoFilm: undefined,\n  film: {\n    data: undefined,\n    isDataLoaded: false,\n  },\n  reviews: {\n    data: undefined,\n    isDataLoaded: false,\n  },\n  similar: {\n    data: undefined,\n    isDataLoaded: false,\n  },\n  favorite: {\n    data: undefined,\n    isDataLoaded: false,\n  },\n};\n\nexport const films = createReducer(initialState, (builder) => {\n  builder\n    .addCase(loadFilms, (state, action) => {\n      state.films.data = action.payload;\n    })\n    .addCase(loadFilm, (state, action) => {\n      state.film.data = action.payload;\n    })\n    .addCase(loadPromoFilm, (state, action) => {\n      state.promoFilm = action.payload;\n    })\n    .addCase(loadSimilarFilms, (state, action) => {\n      state.similar.data = action.payload;\n    })\n    .addCase(loadFavoriteFilms, (state, action) => {\n      state.favorite.data = action.payload;\n    })\n    .addCase(loadReviews, (state, action) => {\n      state.reviews.data = action.payload;\n    })\n    .addCase(setIsDataLoaded, (state, action) => {\n      state[action.payload.key].isDataLoaded = action.payload.isDataLoaded;\n    });\n});\n","import {createReducer} from '@reduxjs/toolkit';\nimport {changeGenre} from '../action';\n\nconst initialState = {\n  genre: 'All genres',\n};\n\nexport const genre = createReducer(initialState, (builder) => {\n  builder\n    .addCase(changeGenre, (state, action) => {\n      state.genre = action.payload;\n    });\n});\n","import {combineReducers} from 'redux';\nimport {user} from './user/user';\nimport {films} from './films/films';\nimport {genre} from './genre/genre';\n\nexport const NameSpace = {\n  USER: 'USER',\n  FILMS: 'FILMS',\n  UTIL: 'UTIL',\n};\n\nexport default combineReducers({\n  [NameSpace.USER]: user,\n  [NameSpace.FILMS]: films,\n  [NameSpace.UTIL]: genre,\n});\n","import {NameSpace} from '../root-reducer';\n\nexport const getAuthorizationStatus = (state) => state[NameSpace.USER].authorizationStatus;\n","import React from 'react';\nimport {Link, useHistory} from 'react-router-dom';\nimport {useDispatch, useSelector} from 'react-redux';\nimport {AppRoute, AuthorizationStatus} from '../../const';\nimport {logout} from '../../store/api-actions';\nimport {getAuthorizationStatus} from '../../store/user/selectors';\n\nfunction UserBlock() {\n  const authorizationStatus = useSelector(getAuthorizationStatus);\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const avatarURL = localStorage.getItem('avatar');\n\n  const handleSignOut = (evt) => {\n    evt.preventDefault();\n\n    dispatch(logout());\n  };\n\n  return authorizationStatus === AuthorizationStatus.NO_AUTH ?\n    (\n      <div className=\"user-block\">\n        <Link to={AppRoute.SIGN_IN} className=\"user-block__link\">Sign in</Link>\n      </div>\n    ) :\n    (\n      <ul className=\"user-block\">\n        <li className=\"user-block__item\">\n          <div className=\"user-block__avatar\" onClick={() => history.push(AppRoute.MY_LIST)}>\n            <img src={avatarURL ? avatarURL : 'img/avatar.jpg'} alt=\"User avatar\" width=\"63\" height=\"63\" />\n          </div>\n        </li>\n        <li className=\"user-block__item\">\n          <Link to={AppRoute.MAIN} className=\"user-block__link\" onClick={handleSignOut}>Sign out</Link>\n        </li>\n      </ul>\n    );\n}\n\nexport default UserBlock;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {useHistory} from 'react-router-dom';\n\nfunction ButtonPlay(props) {\n  const {id} = props;\n  const history = useHistory();\n\n  return (\n    <button className=\"btn btn--play film-card__button\" type=\"button\" onClick={() => history.push(`/player/${id}`)}>\n      <svg viewBox=\"0 0 19 19\" width=\"19\" height=\"19\">\n        <use xlinkHref=\"#play-s\"></use>\n      </svg>\n      <span>Play</span>\n    </button>\n  );\n}\n\nButtonPlay.propTypes = {\n  id: PropTypes.number.isRequired,\n};\n\nexport default ButtonPlay;\n","import React, {useState} from 'react';\nimport {useDispatch, useSelector} from 'react-redux';\nimport {useHistory} from 'react-router-dom';\nimport {AppRoute, AuthorizationStatus} from '../../const';\nimport {postFavorite} from '../../store/api-actions';\nimport {getAuthorizationStatus} from '../../store/user/selectors';\nimport filmProp from '../film-screen/film.prop';\n\nfunction ButtonMyList(props) {\n  const {film} = props;\n  const history = useHistory();\n  const [isFavorite, setIsFavorite] = useState(film.isFavorite);\n  const authorizationStatus = useSelector(getAuthorizationStatus);\n  const dispatch = useDispatch();\n\n  const handleMyListClick = (evt) => {\n    evt.preventDefault();\n\n    if (authorizationStatus !== AuthorizationStatus.AUTH) {\n      history.push(AppRoute.SIGN_IN);\n    } else {\n      setIsFavorite((prevState) => {\n        const status = prevState ? 0 : 1;\n        dispatch(postFavorite(film.id, status));\n        return !prevState;\n      });\n    }\n  };\n\n  return (\n    <button className=\"btn btn--list film-card__button\" type=\"button\" onClick={handleMyListClick}>\n      <svg viewBox=\"0 0 19 20\" width=\"19\" height=\"20\">\n        <use xlinkHref={isFavorite ? '#in-list' : '#add'}></use>\n      </svg>\n      <span>My list</span>\n    </button>\n  );\n}\n\nButtonMyList.propTypes = {\n  film: filmProp,\n};\n\nexport default ButtonMyList;\n","import {NameSpace} from '../root-reducer';\n\nexport const getFilms = (state) => state[NameSpace.FILMS].films.data;\nexport const getFilm = (state) => state[NameSpace.FILMS].film.data;\nexport const getPromoFilm = (state) => state[NameSpace.FILMS].promoFilm;\nexport const getSimilarFilms = (state) => state[NameSpace.FILMS].similar.data;\nexport const getReviews = (state) => state[NameSpace.FILMS].reviews.data;\nexport const getFavoriteFilms = (state) => state[NameSpace.FILMS].favorite.data;\nexport const getDataLoadedStatus = (state, key) => state[NameSpace.FILMS][key].isDataLoaded;\n","import React from 'react';\nimport Logo from '../logo/logo';\nimport UserBlock from '../user-block/user-block';\nimport ButtonPlay from '../button-play/button-play';\nimport ButtonMyList from '../button-my-list/button-my-list';\nimport {useSelector} from 'react-redux';\nimport {getPromoFilm} from '../../store/films/selectors';\n\nfunction PromoFilm() {\n  const promoFilm = useSelector(getPromoFilm);\n\n  return (\n    <section className=\"film-card\">\n      <div className=\"film-card__bg\">\n        <img src={promoFilm.backgroundImage} alt={promoFilm.name} />\n      </div>\n\n      <h1 className=\"visually-hidden\">WTW</h1>\n\n      <header className=\"page-header film-card__head\">\n        <Logo />\n\n        <UserBlock />\n      </header>\n\n      <div className=\"film-card__wrap\">\n        <div className=\"film-card__info\">\n          <div className=\"film-card__poster\">\n            <img src={promoFilm.posterImage} alt={`${promoFilm.name} poster`} width=\"218\" height=\"327\" />\n          </div>\n\n          <div className=\"film-card__desc\">\n            <h2 className=\"film-card__title\">{promoFilm.name}</h2>\n            <p className=\"film-card__meta\">\n              <span className=\"film-card__genre\">{promoFilm.genre}</span>\n              <span className=\"film-card__year\">{promoFilm.released}</span>\n            </p>\n\n            <div className=\"film-card__buttons\">\n              <ButtonPlay id={promoFilm.id} />\n              <ButtonMyList film={promoFilm} />\n            </div>\n          </div>\n        </div>\n      </div>\n    </section>\n  );\n}\n\nexport default PromoFilm;\n","import {NameSpace} from '../root-reducer';\n\nexport const getGenre = (state) => state[NameSpace.UTIL].genre;\n","import React from 'react';\n\nfunction LoadingScreen() {\n  return (\n    <p style={{ marginTop: '100px', textAlign: 'center', color: '#252525' }}>Loading ...</p>\n  );\n}\n\nexport default LoadingScreen;\n","import React, {useState, useEffect} from 'react';\nimport FilmsList from '../films-list/films-list';\nimport GenresList from '../genres-list/genres-list';\nimport Footer from '../footer/footer';\nimport ButtonShowMore from '../button-show-more/button-show-more';\nimport {useDispatch, useSelector} from 'react-redux';\nimport {getFilmsByGenre} from '../../utils';\nimport PromoFilm from '../promo-film/promo-film';\nimport {changeGenre, setIsDataLoaded} from '../../store/action';\nimport {getDataLoadedStatus, getFilms} from '../../store/films/selectors';\nimport {getGenre} from '../../store/genre/selectors';\nimport {fetchFilms} from '../../store/api-actions';\nimport LoadingScreen from '../loading-screen/loading-screen';\nimport {StoreKeys} from '../../const';\n\nconst INITIAL_FILMS_COUNT = 8;\nconst ADD_FILMS_STEP = 8;\nconst INITIAL_GENRE = 'All genres';\n\nfunction MainScreen() {\n  const isDataLoaded = useSelector((state) => getDataLoadedStatus(state, StoreKeys.FILMS));\n  const films = useSelector(getFilms);\n  const genre = useSelector(getGenre);\n  const [filmsCount, setFilmsCount] = useState(INITIAL_FILMS_COUNT);\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    if (!isDataLoaded) {\n      dispatch(fetchFilms());\n    }\n\n    return () => {\n      if (isDataLoaded) {\n        dispatch(setIsDataLoaded({key: StoreKeys.FILMS, isDataLoaded: false}));\n      }\n    };\n  }, [dispatch, isDataLoaded]);\n\n  useEffect(() => {\n    dispatch(changeGenre(INITIAL_GENRE));\n  }, [dispatch]);\n\n  const onGenreChange = (evt) => {\n    if (evt.target.tagName === 'A') {\n      evt.preventDefault();\n\n      if (evt.target.textContent !== genre) {\n        setFilmsCount(INITIAL_FILMS_COUNT);\n        dispatch(changeGenre(evt.target.textContent));\n      }\n    }\n  };\n\n  const onShowMoreButtonClick = () => {\n    setFilmsCount((prevFilmsCount) => prevFilmsCount + ADD_FILMS_STEP);\n  };\n\n  if (!isDataLoaded) {\n    return <LoadingScreen />;\n  }\n\n  return (\n    <>\n      <PromoFilm />\n\n      <div className=\"page-content\">\n        <section className=\"catalog\">\n          <h2 className=\"catalog__title visually-hidden\">Catalog</h2>\n\n          <GenresList films={films} activeGenre={genre} onGenreChange={onGenreChange} />\n\n          <FilmsList films={getFilmsByGenre(films, genre)} filmsCount={filmsCount} />\n\n          <div className=\"catalog__more\">\n            {!(filmsCount >= getFilmsByGenre(films, genre).length) && <ButtonShowMore onShowMoreButtonClick={onShowMoreButtonClick} />}\n          </div>\n        </section>\n\n        <Footer />\n      </div>\n    </>\n  );\n}\n\nexport default MainScreen;\n","import React, {useState} from 'react';\nimport Logo from '../logo/logo';\nimport Footer from '../footer/footer';\nimport {useDispatch, useSelector} from 'react-redux';\nimport {login} from '../../store/api-actions';\nimport {AppRoute, AuthorizationStatus} from '../../const';\nimport {Redirect} from 'react-router-dom';\nimport {getAuthorizationStatus} from '../../store/user/selectors';\n\nfunction SignInScreen() {\n  const authorizationStatus = useSelector(getAuthorizationStatus);\n  const [isError, setIsError] = useState(false);\n  const dispatch = useDispatch();\n\n  if (authorizationStatus !== AuthorizationStatus.NO_AUTH) {\n    return <Redirect to={AppRoute.MAIN} />;\n  }\n\n  const handleSubmit = (evt) => {\n    evt.preventDefault();\n\n    const formData = new FormData(evt.target);\n\n    const email = formData.get('user-email');\n    const password = formData.get('user-password');\n\n    const isPasswordValid = password.split('').some((character) => character !== ' ');\n\n    if (isPasswordValid) {\n      dispatch(login({\n        email,\n        password,\n      }))\n        .catch(() => setIsError(true));\n    } else {\n      setIsError(true);\n    }\n  };\n\n  const handleInput = () => {\n    setIsError(false);\n  };\n\n  return (\n    <div className=\"user-page\">\n      <header className=\"page-header user-page__head\">\n        <Logo />\n\n        <h1 className=\"page-title user-page__title\">Sign in</h1>\n      </header>\n\n      <div className=\"sign-in user-page__content\">\n        <form action=\"#\" className=\"sign-in__form\" onInput={handleInput} onSubmit={handleSubmit}>\n          {isError ?\n            <div className=\"sign-in__message\">\n              <p>An error occurred. Please check your email or password and try again.</p>\n            </div> : ''}\n          <div className=\"sign-in__fields\">\n            <div className=\"sign-in__field\">\n              <input\n                className=\"sign-in__input\"\n                type=\"email\"\n                placeholder=\"Email address\"\n                name=\"user-email\"\n                id=\"user-email\"\n                required\n                data-testid=\"user-email\"\n              />\n              <label className=\"sign-in__label visually-hidden\" htmlFor=\"user-email\">Email address</label>\n            </div>\n            <div className=\"sign-in__field\">\n              <input\n                className=\"sign-in__input\"\n                type=\"password\"\n                placeholder=\"Password\"\n                name=\"user-password\"\n                id=\"user-password\"\n                required\n                data-testid=\"user-password\"\n              />\n              <label className=\"sign-in__label visually-hidden\" htmlFor=\"user-password\">Password</label>\n            </div>\n          </div>\n          <div className=\"sign-in__submit\">\n            <button className=\"sign-in__btn\" type=\"submit\">Sign in</button>\n          </div>\n        </form>\n      </div>\n\n      <Footer />\n    </div>\n  );\n}\n\nexport default SignInScreen;\n","import React, {useEffect} from 'react';\nimport Logo from '../logo/logo';\nimport Footer from '../footer/footer';\nimport UserBlock from '../user-block/user-block';\nimport FilmsList from '../films-list/films-list';\nimport LoadingScreen from '../loading-screen/loading-screen';\nimport {useDispatch, useSelector} from 'react-redux';\nimport {getDataLoadedStatus, getFavoriteFilms} from '../../store/films/selectors';\nimport {setIsDataLoaded} from '../../store/action';\nimport {fetchFavoriteFilms} from '../../store/api-actions';\nimport {StoreKeys} from '../../const';\n\nfunction MyListScreen() {\n  const films = useSelector(getFavoriteFilms);\n  const isDataLoaded = useSelector((state) => getDataLoadedStatus(state, StoreKeys.FAVORITE));\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    if (!isDataLoaded) {\n      dispatch(fetchFavoriteFilms());\n    }\n\n    return () => {\n      if (isDataLoaded) {\n        dispatch(setIsDataLoaded({key: StoreKeys.FAVORITE, isDataLoaded: false}));\n      }\n    };\n  }, [dispatch, isDataLoaded]);\n\n  if (!isDataLoaded) {\n    return <LoadingScreen />;\n  }\n\n  return (\n    <div className=\"user-page\">\n      <header className=\"page-header user-page__head\">\n        <Logo />\n\n        <h1 className=\"page-title user-page__title\">My list</h1>\n\n        <UserBlock />\n      </header>\n\n      <section className=\"catalog\">\n        {(!films || films.length === 0) ?\n          <h2 className=\"catalog__title\">Catalog is empty</h2> :\n          <h2 className=\"catalog__title visually-hidden\">Catalog</h2>}\n\n        {(!films || films.length === 0) ? '' : <FilmsList films={films} filmsCount={films.length} />}\n      </section>\n\n      <Footer />\n    </div>\n  );\n}\n\nexport default MyListScreen;\n","import React, {useEffect, useState} from 'react';\nimport PropTypes from 'prop-types';\nimport SmallFilmCard from '../small-film-card/small-film-card';\nimport {excludeFilm} from '../../utils';\nimport LoadingScreen from '../loading-screen/loading-screen';\nimport {fetchSimilarFilms} from '../../store/api-actions';\nimport {useDispatch, useSelector} from 'react-redux';\nimport {setIsDataLoaded} from '../../store/action';\nimport {getSimilarFilms} from '../../store/films/selectors';\nimport {getDataLoadedStatus} from '../../store/films/selectors';\nimport {StoreKeys} from '../../const';\n\nconst FILMS_COUNT = 4;\n\nfunction FilmsListSimilar(props) {\n  const {filmIDToExclude} = props;\n  const similar = useSelector(getSimilarFilms);\n  const isDataLoaded = useSelector((state) => getDataLoadedStatus(state, StoreKeys.SIMILAR));\n  const [activeFilmID, setActiveFilmID] = useState(undefined);\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    if (!isDataLoaded) {\n      dispatch(fetchSimilarFilms(filmIDToExclude));\n    }\n\n    return () => {\n      if (isDataLoaded) {\n        dispatch(setIsDataLoaded({key: StoreKeys.SIMILAR, isDataLoaded: false}));\n      }\n    };\n  }, [dispatch, filmIDToExclude, isDataLoaded]);\n\n  if (!isDataLoaded) {\n    return <LoadingScreen />;\n  }\n\n  const onFilmCardHoverChange = (id) => {\n    setActiveFilmID(id);\n  };\n\n  return (\n    <section className=\"catalog catalog--like-this\">\n      <h2 className=\"catalog__title\">{(!similar || similar.length - 1 === 0) ? 'More like this list is empty' : 'More like this'}</h2>\n\n      {(!similar || similar.length - 1 === 0) ? '' :\n        <div className=\"catalog__films-list\">\n          {excludeFilm(similar, filmIDToExclude).slice(0, FILMS_COUNT).map((film) => (\n            <SmallFilmCard\n              key={film.id}\n              film={film}\n              isActive={activeFilmID === film.id}\n              onFilmCardHoverChange={onFilmCardHoverChange}\n            />))}\n        </div>}\n    </section>\n  );\n}\n\nFilmsListSimilar.propTypes = {\n  filmIDToExclude: PropTypes.number,\n};\n\nexport default FilmsListSimilar;\n","import React from 'react';\nimport filmProp from '../film-screen/film.prop';\nimport {getRatingLevel} from '../../utils';\n\nfunction FilmOverview(props) {\n  const {film} = props;\n\n  return (\n    <>\n      <div className=\"film-rating\">\n        <div className=\"film-rating__score\">{film.rating.toString().replace('.', ',')}</div>\n        <p className=\"film-rating__meta\">\n          <span className=\"film-rating__level\">{getRatingLevel(film.rating)}</span>\n          <span className=\"film-rating__count\">{film.scoresCount} ratings</span>\n        </p>\n      </div>\n\n      <div className=\"film-card__text\">\n        <p>{film.description}</p>\n\n        <p className=\"film-card__director\"><strong>Director: {film.director}</strong></p>\n\n        <p className=\"film-card__starring\"><strong>Starring: {film.starring.join(', ')}</strong></p>\n      </div>\n    </>\n  );\n}\n\nFilmOverview.propTypes = {\n  film: filmProp,\n};\n\nexport default FilmOverview;\n\n","import React from 'react';\nimport filmProp from '../film-screen/film.prop';\nimport {formatRunTimeForFilmDetails} from '../../utils';\n\nfunction FilmDetails(props) {\n  const {film} = props;\n\n  const renderStarring = (starring) =>\n    starring.map((star, index, array) =>\n      index < array.length - 1 ? <React.Fragment key={star}>{`${star}, `}<br /></React.Fragment> : <React.Fragment key={star}>{star}</React.Fragment>);\n\n  return (\n    <div className=\"film-card__text film-card__row\">\n      <div className=\"film-card__text-col\">\n        <p className=\"film-card__details-item\">\n          <strong className=\"film-card__details-name\">Director</strong>\n          <span className=\"film-card__details-value\">{film.director}</span>\n        </p>\n        <p className=\"film-card__details-item\">\n          <strong className=\"film-card__details-name\">Starring</strong>\n          <span className=\"film-card__details-value\">{renderStarring(film.starring)}</span>\n        </p>\n      </div>\n\n      <div className=\"film-card__text-col\">\n        <p className=\"film-card__details-item\">\n          <strong className=\"film-card__details-name\">Run Time</strong>\n          <span className=\"film-card__details-value\">{formatRunTimeForFilmDetails(film.runTime)}</span>\n        </p>\n        <p className=\"film-card__details-item\">\n          <strong className=\"film-card__details-name\">Genre</strong>\n          <span className=\"film-card__details-value\">{film.genre}</span>\n        </p>\n        <p className=\"film-card__details-item\">\n          <strong className=\"film-card__details-name\">Released</strong>\n          <span className=\"film-card__details-value\">{film.released}</span>\n        </p>\n      </div>\n    </div>\n  );\n}\n\nFilmDetails.propTypes = {\n  film: filmProp,\n};\n\nexport default FilmDetails;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nfunction Review(props) {\n  const {review} = props;\n\n  const date = new Date(review.date);\n  const dateOptions = {year: 'numeric', month: 'long', day: 'numeric' };\n\n  return (\n    <div className=\"review\">\n      <blockquote className=\"review__quote\">\n        <p className=\"review__text\">{review.comment}</p>\n\n        <footer className=\"review__details\">\n          <cite className=\"review__author\">{review.user.name}</cite>\n          <time className=\"review__date\" dateTime={`${date.getFullYear()}-${date.getMonth() + 1}-${date.getDate()}`}>{date.toLocaleDateString('en-US', dateOptions)}</time>\n        </footer>\n      </blockquote>\n\n      <div className=\"review__rating\">{review.rating.toString().replace('.', ',')}</div>\n    </div>\n  );\n}\n\nReview.propTypes = {\n  review: PropTypes.object.isRequired,\n};\n\nexport default Review;\n\n","import React, {useEffect} from 'react';\nimport Review from '../review/review';\nimport LoadingScreen from '../loading-screen/loading-screen';\nimport {fetchReviews} from '../../store/api-actions';\nimport {useDispatch, useSelector} from 'react-redux';\nimport {setIsDataLoaded} from '../../store/action';\nimport {getFilm, getReviews} from '../../store/films/selectors';\nimport {getDataLoadedStatus} from '../../store/films/selectors';\nimport {StoreKeys} from '../../const';\n\nfunction FilmReviews() {\n  const film = useSelector(getFilm);\n  const reviews = useSelector(getReviews);\n  const isDataLoaded = useSelector((state) => getDataLoadedStatus(state, StoreKeys.REVIEWS));\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    if (!isDataLoaded) {\n      dispatch(fetchReviews(film.id));\n    }\n\n    return () => {\n      if (isDataLoaded) {\n        dispatch(setIsDataLoaded({key: StoreKeys.REVIEWS, isDataLoaded: false}));\n      }\n    };\n  }, [dispatch, film.id, isDataLoaded]);\n\n  if (!isDataLoaded) {\n    return <LoadingScreen />;\n  }\n\n  if (!reviews || reviews.length === 0) {\n    return <p style={{ marginTop: '100px', textAlign: 'center', color: '#252525' }}>Reviews list is empty</p>;\n  }\n\n  const reviewsColumnLeft = reviews.slice(0, reviews.length / 2 + reviews.length % 2);\n  const reviewsColumnRight = reviews.slice(reviews.length / 2 + reviews.length % 2);\n\n  return (\n    <div className=\"film-card__reviews film-card__row\">\n      <div className=\"film-card__reviews-col\">\n        {reviewsColumnLeft.map((review) => <Review key={review.id} review={review} />)}\n      </div>\n      <div className=\"film-card__reviews-col\">\n        {reviewsColumnRight.map((review) => <Review key={review.id} review={review} />)}\n      </div>\n    </div>\n  );\n}\n\nexport default FilmReviews;\n\n","import React from 'react';\nimport {Link, useParams} from 'react-router-dom';\nimport filmProp from '../film-screen/film.prop';\nimport FilmOverview from '../film-overview/film-overview';\nimport FilmDetails from '../film-details/film-details';\nimport FilmReviews from '../film-reviews/film-reviews';\nimport {Tabs} from '../../const';\n\nfunction FilmTabs(props) {\n  const {film} = props;\n  const {tab = Tabs.OVERVIEW} = useParams();\n\n  const getComponentByActiveTab = () => {\n    switch (tab) {\n      case Tabs.DETAILS:\n        return <FilmDetails film={film} />;\n      case Tabs.REVIEWS:\n        return <FilmReviews film={film} />;\n      default:\n        return <FilmOverview film={film} />;\n    }\n  };\n\n  return (\n    <div className=\"film-card__desc\">\n      <nav className=\"film-nav film-card__nav\">\n        <ul className=\"film-nav__list\">\n          <li className={`film-nav__item ${tab === Tabs.OVERVIEW ? 'film-nav__item--active' : ''}`}>\n            <Link to={`/films/${film.id}`} className=\"film-nav__link\">Overview</Link>\n          </li>\n          <li className={`film-nav__item ${tab === Tabs.DETAILS ? 'film-nav__item--active' : ''}`}>\n            <Link to={`/films/${film.id}/details`} className=\"film-nav__link\">Details</Link>\n          </li>\n          <li className={`film-nav__item ${tab === Tabs.REVIEWS ? 'film-nav__item--active' : ''}`}>\n            <Link to={`/films/${film.id}/reviews`} className=\"film-nav__link\">Reviews</Link>\n          </li>\n        </ul>\n      </nav>\n\n      {getComponentByActiveTab()}\n    </div>\n  );\n}\n\nFilmTabs.propTypes = {\n  film: filmProp,\n};\n\nexport default FilmTabs;\n","import React from 'react';\nimport {Link} from 'react-router-dom';\nimport Logo from '../logo/logo';\nimport Footer from '../footer/footer';\nimport UserBlock from '../user-block/user-block';\nimport ButtonPlay from '../button-play/button-play';\nimport ButtonMyList from '../button-my-list/button-my-list';\nimport FilmsListSimilar from '../films-list-similar/films-list-similar';\nimport FilmTabs from '../film-tabs/film-tabs';\nimport {AuthorizationStatus} from '../../const';\nimport {useSelector} from 'react-redux';\nimport {getAuthorizationStatus} from '../../store/user/selectors';\nimport filmProp from './film.prop';\n\nfunction FilmScreen(props) {\n  const {film} = props;\n  const authorizationStatus = useSelector(getAuthorizationStatus);\n\n  return (\n    <>\n      <section className=\"film-card film-card--full\">\n        <div className=\"film-card__hero\">\n          <div className=\"film-card__bg\">\n            <img src={film.backgroundImage} alt={film.name} />\n          </div>\n\n          <h1 className=\"visually-hidden\">WTW</h1>\n\n          <header className=\"page-header film-card__head\">\n            <Logo />\n\n            <UserBlock />\n          </header>\n\n          <div className=\"film-card__wrap\">\n            <div className=\"film-card__desc\">\n              <h2 className=\"film-card__title\">{film.name}</h2>\n              <p className=\"film-card__meta\">\n                <span className=\"film-card__genre\">{film.genre}</span>\n                <span className=\"film-card__year\">{film.released}</span>\n              </p>\n\n              <div className=\"film-card__buttons\">\n                <ButtonPlay id={film.id} />\n                <ButtonMyList film={film} />\n                {authorizationStatus === AuthorizationStatus.AUTH ? <Link to={`/films/${film.id}/review`} className=\"btn film-card__button\">Add review</Link> : ''}\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"film-card__wrap film-card__translate-top\">\n          <div className=\"film-card__info\">\n            <div className=\"film-card__poster film-card__poster--big\">\n              <img src={film.posterImage} alt={`${film.name} poster`} width=\"218\" height=\"327\" />\n            </div>\n\n            <FilmTabs film={film} />\n          </div>\n        </div>\n      </section>\n\n      <div className=\"page-content\">\n        <FilmsListSimilar filmIDToExclude={film.id}/>\n        <Footer />\n      </div>\n    </>\n  );\n}\n\nFilmScreen.propTypes = {\n  film: filmProp,\n};\n\nexport default FilmScreen;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nfunction Toast(props) {\n  const {text} = props;\n\n  return (\n    <div className=\"toast\">\n      <p className=\"toast__text\">{text}</p>\n    </div>\n  );\n}\n\nToast.propTypes = {\n  text: PropTypes.string.isRequired,\n};\n\nexport default Toast;\n\n","import React, {useState} from 'react';\nimport PropTypes from 'prop-types';\nimport Toast from '../toast/toast';\nimport {useDispatch} from 'react-redux';\nimport {postReview} from '../../store/api-actions';\nimport {redirectToRoute} from '../../store/action';\n\nconst TOAST_SHOW_TIME = 2000;\nconst errorMessage = 'An error occurred. Please try again.';\n\nfunction AddReviewForm(props) {\n  const {id} = props;\n  const [review, setReview] = useState({\n    rating: 0,\n    comment: '',\n  });\n  const {rating, comment} = review;\n  const [toastVisibility, setToastVisbility] = useState(false);\n  const dispatch = useDispatch();\n\n  const setFormDisability = (form, bool) => {\n    Array.from(form.elements).forEach((element) => element.disabled = bool);\n  };\n\n  const onError = (form) => {\n    setToastVisbility(form, true);\n\n    setTimeout(() => {\n      if (form) {\n        setFormDisability(form, false);\n        setToastVisbility(form, false);\n      }\n    }, TOAST_SHOW_TIME);\n  };\n\n  const onSuccess = (form) => {\n    if (form) {\n      setFormDisability(form, false);\n\n      form.reset();\n      setReview((prevReview) => ({\n        ...prevReview,\n        rating: 0,\n        comment: '',\n      }));\n    }\n  };\n\n  const handleSubmit = (evt) => {\n    evt.preventDefault();\n    setFormDisability(evt.target, true);\n\n    dispatch(postReview(id, {rating, comment}, onSuccess, onError))\n      .then(() => {\n        onSuccess(evt.target);\n        dispatch(redirectToRoute(`/films/${id}`));\n      })\n      .catch(() => onError(evt.target));\n  };\n\n  const handleRatingChange = (evt) => {\n    const {value} = evt.target;\n\n    setReview((prevReview) => ({\n      ...prevReview,\n      rating: value,\n    }));\n  };\n\n  const handleCommentChange = (evt) => {\n    const {value} = evt.target;\n\n    setReview((prevReview) => ({\n      ...prevReview,\n      comment: value,\n    }));\n  };\n\n  return (\n    <form action=\"#\" className=\"add-review__form\" onSubmit={handleSubmit}>\n      <div className=\"rating\">\n        <div className=\"rating__stars\" onChange={handleRatingChange}>\n          <input className=\"rating__input\" id=\"star-10\" type=\"radio\" name=\"rating\" value=\"10\" data-testid=\"star-10\" />\n          <label className=\"rating__label\" htmlFor=\"star-10\">Rating 10</label>\n\n          <input className=\"rating__input\" id=\"star-9\" type=\"radio\" name=\"rating\" value=\"9\" />\n          <label className=\"rating__label\" htmlFor=\"star-9\">Rating 9</label>\n\n          <input className=\"rating__input\" id=\"star-8\" type=\"radio\" name=\"rating\" value=\"8\" />\n          <label className=\"rating__label\" htmlFor=\"star-8\">Rating 8</label>\n\n          <input className=\"rating__input\" id=\"star-7\" type=\"radio\" name=\"rating\" value=\"7\" />\n          <label className=\"rating__label\" htmlFor=\"star-7\">Rating 7</label>\n\n          <input className=\"rating__input\" id=\"star-6\" type=\"radio\" name=\"rating\" value=\"6\" />\n          <label className=\"rating__label\" htmlFor=\"star-6\">Rating 6</label>\n\n          <input className=\"rating__input\" id=\"star-5\" type=\"radio\" name=\"rating\" value=\"5\" />\n          <label className=\"rating__label\" htmlFor=\"star-5\">Rating 5</label>\n\n          <input className=\"rating__input\" id=\"star-4\" type=\"radio\" name=\"rating\" value=\"4\" />\n          <label className=\"rating__label\" htmlFor=\"star-4\">Rating 4</label>\n\n          <input className=\"rating__input\" id=\"star-3\" type=\"radio\" name=\"rating\" value=\"3\" />\n          <label className=\"rating__label\" htmlFor=\"star-3\">Rating 3</label>\n\n          <input className=\"rating__input\" id=\"star-2\" type=\"radio\" name=\"rating\" value=\"2\" />\n          <label className=\"rating__label\" htmlFor=\"star-2\">Rating 2</label>\n\n          <input className=\"rating__input\" id=\"star-1\" type=\"radio\" name=\"rating\" value=\"1\" />\n          <label className=\"rating__label\" htmlFor=\"star-1\">Rating 1</label>\n        </div>\n      </div>\n\n      <div className=\"add-review__text\">\n        <textarea\n          className=\"add-review__textarea\"\n          name=\"review-text\"\n          id=\"review-text\"\n          placeholder=\"Review text\"\n          onChange={handleCommentChange}\n          data-testid=\"review-text\"\n        >\n        </textarea>\n        <div className=\"add-review__submit\">\n          <button className=\"add-review__btn\" type=\"submit\" disabled={!(rating !== 0 && comment.length >= 50 && comment.length <= 400)}>Post</button>\n        </div>\n\n      </div>\n\n      {toastVisibility ? <Toast text={errorMessage}/> : ''}\n    </form>\n  );\n}\n\nAddReviewForm.propTypes = {\n  id: PropTypes.number.isRequired,\n};\n\nexport default AddReviewForm;\n","import React from 'react';\nimport {Link} from 'react-router-dom';\nimport Logo from '../logo/logo';\nimport UserBlock from '../user-block/user-block';\nimport AddReviewForm from '../add-review-form/add-review-form';\nimport filmProp from '../film-screen/film.prop';\n\nfunction AddReviewScreen(props) {\n  const {film} = props;\n\n  return (\n    <section className=\"film-card film-card--full\">\n      <div className=\"film-card__header\">\n        <div className=\"film-card__bg\">\n          <img src={film.backgroundImage} alt={film.name} />\n        </div>\n\n        <h1 className=\"visually-hidden\">WTW</h1>\n\n        <header className=\"page-header\">\n          <Logo />\n\n          <nav className=\"breadcrumbs\">\n            <ul className=\"breadcrumbs__list\">\n              <li className=\"breadcrumbs__item\">\n                <Link to={`/films/${film.id}`} className=\"breadcrumbs__link\">{film.name}</Link>\n              </li>\n              <li className=\"breadcrumbs__item\">\n                <Link to={`/films/${film.id}/review`} className=\"breadcrumbs__link\">Add review</Link>\n              </li>\n            </ul>\n          </nav>\n\n          <UserBlock />\n        </header>\n\n        <div className=\"film-card__poster film-card__poster--small\">\n          <img src={film.posterImage} alt={`${film.name} poster`} width=\"218\" height=\"327\" />\n        </div>\n      </div>\n\n      <div className=\"add-review\">\n        <AddReviewForm id={film.id} />\n      </div>\n\n    </section>\n  );\n}\n\nAddReviewScreen.propTypes = {\n  film: filmProp,\n};\n\nexport default AddReviewScreen;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nfunction PlayerControls(props) {\n  const {\n    name,\n    isPlaying,\n    duration,\n    currentTimeInPercentages,\n    onPausePlayButtonClick,\n    onFullScreenButtonClick,\n  } = props;\n\n  return (\n    <div className=\"player__controls\">\n      <div className=\"player__controls-row\">\n        <div className=\"player__time\">\n          <progress className=\"player__progress\" value=\"0\" max=\"100\"></progress>\n          <div className=\"player__toggler\" style={{ left: `${currentTimeInPercentages}` }}>Toggler</div>\n        </div>\n        <div className=\"player__time-value\">{duration}</div>\n      </div>\n\n      <div className=\"player__controls-row\">\n        <button type=\"button\" className=\"player__play\" onClick={onPausePlayButtonClick}>\n          <svg viewBox=\"0 0 19 19\" width=\"19\" height=\"19\">\n            <use xlinkHref={isPlaying ? '#pause' : '#play-s'}></use>\n          </svg>\n          <span>Play</span>\n        </button>\n        <div className=\"player__name\">{name}</div>\n\n        <button type=\"button\" className=\"player__full-screen\" onClick={onFullScreenButtonClick}>\n          <svg viewBox=\"0 0 27 27\" width=\"27\" height=\"27\">\n            <use xlinkHref=\"#full-screen\"></use>\n          </svg>\n          <span>Full screen</span>\n        </button>\n      </div>\n    </div>\n  );\n}\n\nPlayerControls.propTypes = {\n  name: PropTypes.string.isRequired,\n  isPlaying: PropTypes.number.isRequired,\n  duration: PropTypes.string.isRequired,\n  currentTimeInPercentages: PropTypes.string.isRequired,\n  onPausePlayButtonClick: PropTypes.func.isRequired,\n  onFullScreenButtonClick: PropTypes.func.isRequired,\n};\n\nexport default PlayerControls;\n","import React, {useRef, useState} from 'react';\nimport {AppRoute} from '../../const';\nimport {useHistory} from 'react-router-dom';\nimport PlayerControls from '../player-controls/player-controls';\nimport {formatRunTimeForPlayer} from '../../utils';\nimport filmProp from '../film-screen/film.prop';\n\nconst MediaState = {\n  PAUSE: 0,\n  PLAYING: 1,\n  TRANSITION: -1,\n};\n\nfunction PlayerScreen(props) {\n  const {film} = props;\n  const history = useHistory();\n\n  const [playerState, setPlayerState] = useState({\n    isPlaying: MediaState.PAUSE,\n    isFullScreen: false,\n    duration: '',\n    currentTimeInPercentages: '',\n  });\n  const {isPlaying, isFullScreen, duration, currentTimeInPercentages} = playerState;\n  const playerRef = useRef();\n\n  const onPausePlayButtonClick = () => {\n    if (isPlaying === MediaState.PAUSE) {\n      setPlayerState((prevState) => ({\n        ...prevState,\n        isPlaying: MediaState.TRANSITION,\n      }));\n\n      playerRef.current.play()\n        .then(() => {\n          setPlayerState((prevState) => {\n            if (prevState.isPlaying === MediaState.TRANSITION) {\n              return {\n                ...prevState,\n                isPlaying: MediaState.PLAYING,\n              };\n            }\n          });\n        })\n        .catch(() => {\n          setPlayerState((prevState) => ({\n            ...prevState,\n            isPlaying: MediaState.PAUSE,\n          }));\n        });\n\n      return;\n    }\n\n    playerRef.current.pause();\n    setPlayerState((prevState) => ({\n      ...prevState,\n      isPlaying: MediaState.PAUSE,\n    }));\n  };\n\n  const handleEscapeKeydown = (evt) => {\n    if (evt.key === 'Escape') {\n      setPlayerState((prevState) => ({\n        ...prevState,\n        isFullScreen: !prevState.isFullScreen,\n      }));\n\n      document.removeEventListener('keydown', handleEscapeKeydown);\n    }\n  };\n\n  const onFullScreenButtonClick = () => {\n    setPlayerState((prevState) => ({\n      ...prevState,\n      isFullScreen: !prevState.isFullScreen,\n    }));\n\n    document.addEventListener('keydown', handleEscapeKeydown);\n  };\n\n  const handleTimeUpdate = () => {\n    setPlayerState((prevState) => ({\n      ...prevState,\n      currentTimeInPercentages: `${playerRef.current.currentTime * 100 / playerRef.current.duration}%`,\n    }));\n  };\n\n  const handleDurationChange = (evt) => {\n    setPlayerState((prevState) => ({\n      ...prevState,\n      duration: formatRunTimeForPlayer(evt.target.duration),\n    }));\n  };\n\n  return (\n    <div className=\"player\">\n      <video\n        ref={playerRef}\n        src={film.videoLink}\n        className=\"player__video\"\n        poster={film.backgroundImage}\n        onTimeUpdate={handleTimeUpdate}\n        onDurationChange={handleDurationChange}\n      >\n      </video>\n\n      <button type=\"button\" className=\"player__exit\" onClick={() => history.push(AppRoute.MAIN)}>Exit</button>\n\n      {!isFullScreen ?\n        <PlayerControls\n          name={film.name}\n          isPlaying={isPlaying}\n          duration={duration}\n          currentTimeInPercentages={currentTimeInPercentages}\n          onPausePlayButtonClick={onPausePlayButtonClick}\n          onFullScreenButtonClick={onFullScreenButtonClick}\n        /> : ''}\n    </div>\n  );\n}\n\nPlayerScreen.propTypes = {\n  film: filmProp,\n};\n\nexport default PlayerScreen;\n","import React from 'react';\nimport {Link} from 'react-router-dom';\nimport {AppRoute} from '../../const';\n\nfunction NotFoundScreen() {\n  return (\n    <section style={{ marginTop: '100px', textAlign: 'center', color: '#252525' }}>\n      <h1>404. Page not found</h1>\n      <Link to={AppRoute.MAIN}>Go to the main page</Link>\n    </section>\n  );\n}\n\nexport default NotFoundScreen;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {Route, Redirect} from 'react-router-dom';\nimport {useSelector} from 'react-redux';\nimport {AppRoute, AuthorizationStatus} from '../../const';\nimport {getAuthorizationStatus} from '../../store/user/selectors';\n\nfunction PrivateRoute(props) {\n  const authorizationStatus = useSelector(getAuthorizationStatus);\n  const {render, path, exact} = props;\n\n  return (\n    <Route\n      path={path}\n      exact={exact}\n      render={(routeProps) => (\n        authorizationStatus === AuthorizationStatus.AUTH\n          ? render(routeProps)\n          : <Redirect to={AppRoute.SIGN_IN} />\n      )}\n    />\n  );\n}\n\nPrivateRoute.propTypes = {\n  exact: PropTypes.bool.isRequired,\n  path: PropTypes.string.isRequired,\n  render: PropTypes.func.isRequired,\n};\n\nexport default PrivateRoute;\n","import React, {useEffect} from 'react';\nimport {useDispatch, useSelector} from 'react-redux';\nimport {useParams} from 'react-router-dom';\nimport LoadingScreen from '../components/loading-screen/loading-screen';\nimport NotFoundScreen from '../components/not-found-screen/not-found-screen';\nimport {StoreKeys} from '../const';\nimport {setIsDataLoaded} from '../store/action';\nimport {fetchFilm} from '../store/api-actions';\nimport {getDataLoadedStatus, getFilm} from '../store/films/selectors';\n\nconst withFilm = (Component) => {\n  function WithFilm(props) {\n    const film = useSelector(getFilm);\n    const isDataLoaded = useSelector((state) => getDataLoadedStatus(state, StoreKeys.FILM));\n    const {id} = useParams();\n    const dispatch = useDispatch();\n\n    useEffect(() => {\n      if (!isDataLoaded) {\n        dispatch(fetchFilm(id));\n      }\n\n      return () => {\n        if (isDataLoaded) {\n          dispatch(setIsDataLoaded({key: StoreKeys.FILM, isDataLoaded: false}));\n        }\n      };\n    }, [dispatch, id, isDataLoaded]);\n\n    if (!isDataLoaded) {\n      return <LoadingScreen />;\n    }\n\n    if (!film) {\n      return <NotFoundScreen />;\n    }\n\n    return <Component film={film} />;\n  }\n\n  return WithFilm;\n};\n\nexport default withFilm;\n","import React from 'react';\nimport {Switch, Route} from 'react-router-dom';\nimport {AppRoute} from '../../const';\nimport MainScreen from '../main-screen/main-screen';\nimport SignInScreen from '../sign-in-screen/sign-in-screen';\nimport MyListScreen from '../my-list-screen/my-list-screen';\nimport FilmScreen from '../film-screen/film-screen';\nimport AddReviewScreen from '../add-review-screen/add-review-screen';\nimport PlayerScreen from '../player-screen/player-screen';\nimport NotFoundScreen from '../not-found-screen/not-found-screen';\nimport PrivateRoute from '../private-route/private-route';\nimport withFilm from '../../hocs/with-film';\n\nconst FilmScreenWrapped = withFilm(FilmScreen);\nconst AddReviewScreenWrapped = withFilm(AddReviewScreen);\nconst PlayerScreenWrapped = withFilm(PlayerScreen);\n\nfunction App() {\n  return (\n    <Switch>\n      <Route exact path={AppRoute.MAIN}>\n        <MainScreen />\n      </Route>\n      <Route exact path={AppRoute.SIGN_IN}>\n        <SignInScreen />\n      </Route>\n      <PrivateRoute\n        exact\n        path={AppRoute.MY_LIST}\n        render={() => <MyListScreen />}\n      >\n      </PrivateRoute>\n      <PrivateRoute\n        exact\n        path={AppRoute.ADD_REVIEW}\n        render={() => <AddReviewScreenWrapped />}\n      >\n      </PrivateRoute>\n      <Route exact path={AppRoute.FILM}>\n        <FilmScreenWrapped />\n      </Route>\n      <Route exact path={AppRoute.PLAYER}>\n        <PlayerScreenWrapped />\n      </Route>\n      <Route>\n        <NotFoundScreen />\n      </Route>\n    </Switch>\n  );\n}\n\nexport default App;\n","import axios from 'axios';\n\nconst BACKEND_URL = 'https://7.react.pages.academy/wtw';\nconst REQUEST_TIMEOUT = 5000;\n\nconst HttpCode = {\n  UNAUTHORIZED: 401,\n};\n\nconst getToken = () => (localStorage.getItem('token') ?? '');\n\nexport const createAPI = (onUnauthorized) => {\n\n  const api = axios.create({\n    baseURL: BACKEND_URL,\n    timeout: REQUEST_TIMEOUT,\n  });\n\n  const onSuccess = (response) => response;\n\n  const onFail = (err) => {\n    const {response} = err;\n\n    if (response.status === HttpCode.UNAUTHORIZED) {\n      onUnauthorized();\n    }\n\n    throw err;\n  };\n\n  api.interceptors.response.use(onSuccess, onFail);\n  api.interceptors.request.use((request) => {\n    request.headers['x-token'] = getToken();\n    return request;\n  });\n\n  return api;\n};\n","import {createBrowserHistory} from 'history';\n\nconst browserHistory = createBrowserHistory();\n\nexport default browserHistory;\n","import browserHistory from '../../browser-history';\nimport {ActionType} from '../action';\n\nexport const redirect = (_store) => (next) => (action) => {\n  if (action.type === ActionType.REDIRECT_TO_ROUTE) {\n    browserHistory.push(action.payload);\n  }\n\n  return next(action);\n};\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {Provider} from 'react-redux';\nimport App from './components/app/app';\nimport rootReducer from './store/root-reducer';\nimport {createAPI} from './services/api';\nimport {checkAuth} from './store/api-actions';\nimport {AuthorizationStatus} from './const';\nimport {redirect} from './store/middlewares/redirect';\nimport {requireAuthorization} from './store/action';\nimport {configureStore} from '@reduxjs/toolkit';\nimport {HashRouter} from 'react-router-dom';\nimport browserHistory from './browser-history';\n\nconst api = createAPI(() => store.dispatch(requireAuthorization(AuthorizationStatus.NO_AUTH)));\n\nconst store = configureStore({\n  reducer: rootReducer,\n  middleware: (getDefaultMiddleware) =>\n    getDefaultMiddleware({\n      thunk: {\n        extraArgument: api,\n      },\n    }).concat(redirect),\n});\n\nstore.dispatch(checkAuth());\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <HashRouter history={browserHistory}>\n        <App />\n      </HashRouter>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}